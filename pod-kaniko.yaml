apiVersion: v1
kind: Pod
metadata:
  name: kaniko
spec:
  containers:
  - name: kaniko
    image: cuijx/executor
    args: ["--dockerfile=/usr/code/go-demo/gin-demo/Dockerfile",
            "--context=/usr/code/go-demo/gin-demo/",
            "--destination=cuijx/gin-demo:v0.0.1"]
    volumeMounts:
      - name: code
        mountPath: /usr/code/go-demo
      - name: docker-config
        mountPath: /kaniko/.docker/
  restartPolicy: Never
  volumes:
    - name: code
      persistentVolumeClaim:
        claimName: code-claim
    - name:  docker-config
      configMap:
        name: docker-config
